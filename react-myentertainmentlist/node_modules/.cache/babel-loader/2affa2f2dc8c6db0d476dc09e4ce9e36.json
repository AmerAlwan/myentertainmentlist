{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\me\\\\Desktop\\\\Projects\\\\myentertainmentlist\\\\react-myentertainmentlist\\\\src\\\\components\\\\home\\\\homegallery\\\\HomeGallery.js\",\n    _s = $RefreshSig$();\n\nimport Gallery from \"react-grid-gallery\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport * as config from \"../../../config.json\";\nimport { search } from \"../../search/util\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function HomeGallery(props) {\n  _s();\n\n  const [images, setImages] = useState([]);\n\n  const formatDate = date => date.getFullYear() + '-' + (date.getMonth() < 9 ? '0' : '') + (date.getMonth() + 1) + '-' + (date.getDate() < 9 ? '0' : '') + date.getDate();\n\n  const getFirstDate = date => (date.getMonth() <= 2 ? date.getFullYear() - 1 : date.getFullYear()) + '-' + (date.getMonth() < 9 ? '0' : '') + ((date.getMonth() <= 2 ? 11 - date.getMonth() : date.getMonth() - 3) + 1) + '-01';\n\n  const shuffleArray = array => {\n    for (let i = array.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n  };\n\n  const getImages = useCallback(async () => {\n    const cConfig = config.default.config.links.tmdb;\n    const gConfig = config.default.config.links.rawg;\n    const currDate = new Date();\n    const fromDate = getFirstDate(currDate);\n    const toDate = formatDate(currDate);\n    const movieImagesResults = await search(`${cConfig.discovermovie.link + cConfig.discovermovie.api_key + config.default.config.keys.tmdb + cConfig.discovermovie.query}`);\n    const tvImagesResults = await search(`${cConfig.discovertv.link + cConfig.discovertv.api_key + config.default.config.keys.tmdb + cConfig.discovertv.query}`);\n    const gameImagesResults = await search(`${gConfig.list.link + 'key=' + config.default.config.keys.rawg + '&dates=' + fromDate + ',' + toDate}`);\n    if (!movieImagesResults || !tvImagesResults) return;\n    const movieImagesData = movieImagesResults[0].data.results;\n    const tvImagesData = tvImagesResults[0].data.results;\n    const gameImagesData = gameImagesResults[0].data.results;\n    const movieImagesProps = movieImagesData.filter(movie => movie.backdrop_path).map(movie => ({\n      src: `${cConfig.image.link + '/w500/' + movie.backdrop_path}`,\n      thumbnail: `${cConfig.image.link + '/w500/' + movie.backdrop_path}`,\n      thumbnailWidth: 300,\n      thumbnailHeight: 169\n    }));\n    const tvImagesProps = tvImagesData.filter(tv => tv.backdrop_path).map(tv => ({\n      src: `${cConfig.image.link + '/w500/' + tv.backdrop_path}`,\n      thumbnail: `${cConfig.image.link + '/w500/' + tv.backdrop_path}`,\n      thumbnailWidth: 300,\n      thumbnailHeight: 169\n    }));\n    const gameImagesProps = gameImagesData.filter(game => game.background_image).map(game => ({\n      src: game.background_image,\n      thumbnail: game.background_image,\n      thumbnailWidth: 300,\n      thumbnailHeight: 169\n    }));\n    let movieIndexes = shuffleArray(Array.from(Array(movieImagesProps.length).keys()));\n    let tvIndexes = shuffleArray(Array.from(Array(tvImagesProps.length).keys()));\n    let gameIndexes = Array.from(Array(gameImagesProps.length).keys()).sort(() => .5 - Math.random());\n    const imageProps = movieIndexes.slice(0, 10).map(i => movieImagesProps[i]).concat(tvIndexes.slice(0, 5).map(i => tvImagesProps[i])).concat(gameIndexes.slice(0, 5).map(i => gameImagesProps[i])).sort(() => .5 - Math.random());\n    setImages(imageProps);\n  }, []);\n  useEffect(() => {\n    getImages();\n  }, [getImages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"block\",\n      minHeight: \"1px\",\n      width: \"100%\",\n      overflow: \"auto\",\n      position: 'absolute',\n      cursor: 'none'\n    },\n    children: /*#__PURE__*/_jsxDEV(Gallery, {\n      images: images,\n      enableLightbox: false,\n      enableImageSelection: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n\n_s(HomeGallery, \"XUtKGidRnrdJ0LEaWWFB89HIJpE=\");\n\n_c = HomeGallery;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomeGallery\");","map":{"version":3,"sources":["C:/Users/me/Desktop/Projects/myentertainmentlist/react-myentertainmentlist/src/components/home/homegallery/HomeGallery.js"],"names":["Gallery","React","useCallback","useEffect","useState","config","search","HomeGallery","props","images","setImages","formatDate","date","getFullYear","getMonth","getDate","getFirstDate","shuffleArray","array","i","length","j","Math","floor","random","getImages","cConfig","default","links","tmdb","gConfig","rawg","currDate","Date","fromDate","toDate","movieImagesResults","discovermovie","link","api_key","keys","query","tvImagesResults","discovertv","gameImagesResults","list","movieImagesData","data","results","tvImagesData","gameImagesData","movieImagesProps","filter","movie","backdrop_path","map","src","image","thumbnail","thumbnailWidth","thumbnailHeight","tvImagesProps","tv","gameImagesProps","game","background_image","movieIndexes","Array","from","tvIndexes","gameIndexes","sort","imageProps","slice","concat","display","minHeight","width","overflow","position","cursor"],"mappings":"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","sourcesContent":["import Gallery from \"react-grid-gallery\";\r\nimport React, {useCallback, useEffect, useState} from \"react\";\r\nimport * as config from \"../../../config.json\";\r\nimport {search} from \"../../search/util\";\r\n\r\nexport function HomeGallery(props) {\r\n    const [images, setImages] = useState([]);\r\n\r\n    const formatDate = date => date.getFullYear() + '-' + (date.getMonth() < 9 ? '0' : '') + (date.getMonth() + 1) + '-' + (date.getDate() < 9 ? '0' : '') + date.getDate();\r\n    const getFirstDate = date => (date.getMonth() <= 2 ? date.getFullYear() - 1 : date.getFullYear()) + '-' + (date.getMonth() < 9 ? '0' : '') + ((date.getMonth() <= 2 ? 11 - date.getMonth() : (date.getMonth() - 3)) + 1) + '-01';\r\n    const shuffleArray = (array) => {\r\n        for (let i = array.length - 1; i > 0; i--) {\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            [array[i], array[j]] = [array[j], array[i]];\r\n        }\r\n    }\r\n\r\n    const getImages = useCallback(async() => {\r\n        const cConfig = config.default.config.links.tmdb;\r\n        const gConfig = config.default.config.links.rawg;\r\n\r\n        const currDate = new Date();\r\n\r\n        const fromDate = getFirstDate(currDate);\r\n        const toDate = formatDate(currDate);\r\n\r\n        const movieImagesResults = await search(`${cConfig.discovermovie.link + cConfig.discovermovie.api_key + config.default.config.keys.tmdb + cConfig.discovermovie.query}`);\r\n        const tvImagesResults = await search(`${cConfig.discovertv.link + cConfig.discovertv.api_key + config.default.config.keys.tmdb + cConfig.discovertv.query}`);\r\n        const gameImagesResults = await search(`${gConfig.list.link + 'key=' + config.default.config.keys.rawg + '&dates=' + fromDate + ',' + toDate}`);\r\n        if (!movieImagesResults || !tvImagesResults) return;\r\n        const movieImagesData = movieImagesResults[0].data.results;\r\n        const tvImagesData = tvImagesResults[0].data.results;\r\n        const gameImagesData = gameImagesResults[0].data.results;\r\n        const movieImagesProps = movieImagesData.filter(movie =>movie.backdrop_path).map(movie => ({\r\n            src: `${cConfig.image.link + '/w500/' + movie.backdrop_path}`,\r\n            thumbnail: `${cConfig.image.link + '/w500/' + movie.backdrop_path}`,\r\n            thumbnailWidth: 300,\r\n            thumbnailHeight: 169\r\n        }));\r\n        const tvImagesProps = tvImagesData.filter(tv => tv.backdrop_path).map(tv => ({\r\n            src: `${cConfig.image.link + '/w500/' + tv.backdrop_path}`,\r\n            thumbnail: `${cConfig.image.link + '/w500/' + tv.backdrop_path}`,\r\n            thumbnailWidth: 300,\r\n            thumbnailHeight: 169\r\n        }));\r\n        const gameImagesProps = gameImagesData.filter(game => game.background_image).map(game => ({\r\n            src: game.background_image,\r\n            thumbnail: game.background_image,\r\n            thumbnailWidth: 300,\r\n            thumbnailHeight: 169\r\n        }));\r\n\r\n        let movieIndexes = shuffleArray(Array.from(Array(movieImagesProps.length).keys()));\r\n        let tvIndexes = shuffleArray(Array.from(Array(tvImagesProps.length).keys()));\r\n        let gameIndexes = Array.from(Array(gameImagesProps.length).keys()).sort( () => .5 - Math.random() );\r\n\r\n\r\n\r\n        const imageProps = movieIndexes.slice(0,10)\r\n                                        .map(i => movieImagesProps[i])\r\n                           .concat(tvIndexes.slice(0,5)\r\n                               .map(i => tvImagesProps[i])).concat(gameIndexes.slice(0,5).map(i => gameImagesProps[i]))\r\n            .sort( () => .5 - Math.random() );\r\n\r\n        setImages(imageProps);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        getImages()\r\n    }, [getImages]);\r\n\r\n    return (\r\n        <div style={{\r\n            display: \"block\",\r\n            minHeight: \"1px\",\r\n            width: \"100%\",\r\n            overflow: \"auto\",\r\n            position: 'absolute',\r\n            cursor: 'none'\r\n        }}>\r\n            <Gallery\r\n                images={images}\r\n                enableLightbox={false}\r\n                enableImageSelection={false}/>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}