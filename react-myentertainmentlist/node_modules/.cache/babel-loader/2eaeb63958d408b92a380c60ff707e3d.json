{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\me\\\\Desktop\\\\Projects\\\\myentertainmentlist\\\\react-myentertainmentlist\\\\src\\\\components\\\\home\\\\homegallery\\\\HomeGallery.js\",\n    _s = $RefreshSig$();\n\nimport Gallery from \"react-grid-gallery\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport * as config from \"../../../config.json\";\nimport { search } from \"../../search/util\";\nimport './HomeGallery.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction waitForElm(selector) {\n  return new Promise(resolve => {\n    if (document.querySelector(selector)) {\n      return resolve(document.querySelector(selector));\n    }\n\n    const observer = new MutationObserver(mutations => {\n      if (document.querySelector(selector)) {\n        resolve(document.querySelector(selector));\n        observer.disconnect();\n      }\n    });\n    observer.observe(document.body, {\n      childList: true,\n      subtree: true\n    });\n  });\n}\n\nexport function HomeGallery(props) {\n  _s();\n\n  const [images, setImages] = useState([]);\n  console.log(window.innerWidth / 100); // const numCols = 6; // ((3/4) * Math.floor(window.innerWidth / 100)) - (5/4); // 10\n  // const yOffset = -15; //-100 // -15\n  // let translateYVal = yOffset;\n  // const translateYChange = 65; //-Math.floor(window.innerHeight / 100) + 16; //64 // 9\n  // let translateY = translateYVal;\n\n  let ogX = 0,\n      ogY = -100,\n      posX = ogX,\n      posY = ogY,\n      ogTranslateY = 60,\n      numOfRows = 1;\n  let translateX = 260,\n      translateY = ogTranslateY,\n      tileHeight = 171;\n  useEffect(() => {\n    waitForElm(\".ReactGridGallery_tile\").then(elm => {\n      document.querySelectorAll(\".ReactGridGallery_tile\").forEach((tile, i) => {\n        tile.style.transform = 'scaleX(1) scaleY(1) scaleZ(1) rotateX(-3deg) rotateY(-34deg) rotateZ(16deg) translateX(0px) translateY(0px) translateZ(0px) skewX(-14deg) skewY(-7deg)';\n        tile.style.left = posX + 'px';\n        tile.style.top = posY + 'px';\n        posX += translateX;\n        posY += translateY;\n\n        if (posX > window.innerWidth) {\n          posX = ogX;\n          posY = tileHeight * numOfRows + ogY;\n          translateY = ogTranslateY;\n          numOfRows++;\n        }\n      });\n    });\n  });\n\n  const formatDate = date => date.getFullYear() + '-' + (date.getMonth() < 9 ? '0' : '') + (date.getMonth() + 1) + '-' + (date.getDate() < 9 ? '0' : '') + date.getDate();\n\n  const getFirstDate = date => (date.getMonth() <= 2 ? date.getFullYear() - 1 : date.getFullYear()) + '-' + (date.getMonth() < 9 ? '0' : '') + ((date.getMonth() <= 2 ? 11 - date.getMonth() : date.getMonth() - 3) + 1) + '-01';\n\n  const shuffleArray = array => {\n    for (let i = array.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n\n    return array;\n  };\n\n  const getImages = useCallback(async () => {\n    const cConfig = config.default.config.links.tmdb;\n    const gConfig = config.default.config.links.rawg;\n    const currDate = new Date();\n    const fromDate = getFirstDate(currDate);\n    const toDate = formatDate(currDate);\n    const movieImagesResults = await search(`${cConfig.discovermovie.link + cConfig.discovermovie.api_key + config.default.config.keys.tmdb + cConfig.discovermovie.query + '&page=' + Math.floor(Math.random() * 5 + 1)}`);\n    const movieImagesResults2 = await search(`${cConfig.discovermovie.link + cConfig.discovermovie.api_key + config.default.config.keys.tmdb + cConfig.discovermovie.query + '&page=' + Math.floor(5 + Math.random() * 5 + 1)}`);\n    const tvImagesResults = await search(`${cConfig.discovertv.link + cConfig.discovertv.api_key + config.default.config.keys.tmdb + cConfig.discovertv.query + '&page=' + Math.floor(Math.random() * 5 + 1)}`);\n    const tvImagesResults2 = await search(`${cConfig.discovertv.link + cConfig.discovertv.api_key + config.default.config.keys.tmdb + cConfig.discovertv.query + '&page=' + Math.floor(5 + Math.random() * 5 + 1)}`);\n    const gameImagesResults = await search(`${gConfig.list.link + 'key=' + config.default.config.keys.rawg + '&dates=' + fromDate + ',' + toDate + '&page=' + Math.floor(Math.random() * 5 + 1)}`);\n    const gameImagesResults2 = await search(`${gConfig.list.link + 'key=' + config.default.config.keys.rawg + '&dates=' + fromDate + ',' + toDate + '&page=' + Math.floor(5 + Math.random() * 5 + 1)}`);\n    if (!movieImagesResults || !movieImagesResults2 || !tvImagesResults || !tvImagesResults2 || !gameImagesResults || !gameImagesResults2) return;\n    const movieImagesData = movieImagesResults[0].data.results.concat(movieImagesResults2[0].data.results);\n    const tvImagesData = tvImagesResults[0].data.results.concat(tvImagesResults2[0].data.results);\n    const gameImagesData = gameImagesResults[0].data.results.concat(gameImagesResults2[0].data.results);\n    const movieImagesProps = movieImagesData.filter(movie => movie.backdrop_path).map((movie, i) => ({\n      src: `${cConfig.image.link + '/w300/' + movie.backdrop_path}`,\n      thumbnail: `${cConfig.image.link + '/w300/' + movie.backdrop_path}`,\n      thumbnailWidth: 300,\n      thumbnailHeight: 169\n    }));\n    const tvImagesProps = tvImagesData.filter(tv => tv.backdrop_path).map((tv, i) => ({\n      src: `${cConfig.image.link + '/w300/' + tv.backdrop_path}`,\n      thumbnail: `${cConfig.image.link + '/w300/' + tv.backdrop_path}`,\n      thumbnailWidth: 300,\n      thumbnailHeight: 169\n    }));\n    const gameImagesProps = gameImagesData.filter(game => game.background_image).map((game, i) => ({\n      src: game.background_image,\n      thumbnail: game.background_image,\n      thumbnailWidth: 300,\n      thumbnailHeight: 169\n    }));\n    let movieIndexes = shuffleArray(Array.from(Array(movieImagesProps.length).keys()));\n    let tvIndexes = shuffleArray(Array.from(Array(tvImagesProps.length).keys()));\n    let gameIndexes = shuffleArray(Array.from(Array(gameImagesProps.length).keys()));\n    const imageProps = shuffleArray(movieIndexes.map(i => movieImagesProps[i]).concat(tvIndexes.map(i => tvImagesProps[i])).concat(gameIndexes.map(i => gameImagesProps[i])));\n    console.log(imageProps);\n    setImages(imageProps);\n  }, []);\n  useEffect(() => {\n    getImages();\n  }, [getImages]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: window.innerWidth + \" \" + window.innerWidth\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gallery-gradient\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gallery-container\",\n      style: {\n        display: \"block\",\n        minHeight: \"1px\",\n        width: \"200%\",\n        overflow: \"hidden\",\n        position: 'absolute',\n        cursor: 'none',\n        zIndex: '-2',\n        top: '-30%',\n        left: '-30%'\n      },\n      children: images.map(image => {\n        return /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"ReactGridGallery_tile\",\n          src: image.thumbnail,\n          style: {\n            width: image.thumbnailWidth,\n            height: image.thumbnailHeight,\n            position: 'fixed',\n            zIndex: 2000\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(HomeGallery, \"AmyW0r2dTGWT017XUevdG1A7wX8=\");\n\n_c = HomeGallery;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomeGallery\");","map":{"version":3,"sources":["C:/Users/me/Desktop/Projects/myentertainmentlist/react-myentertainmentlist/src/components/home/homegallery/HomeGallery.js"],"names":["Gallery","React","useCallback","useEffect","useState","config","search","waitForElm","selector","Promise","resolve","document","querySelector","observer","MutationObserver","mutations","disconnect","observe","body","childList","subtree","HomeGallery","props","images","setImages","console","log","window","innerWidth","ogX","ogY","posX","posY","ogTranslateY","numOfRows","translateX","translateY","tileHeight","then","elm","querySelectorAll","forEach","tile","i","style","transform","left","top","formatDate","date","getFullYear","getMonth","getDate","getFirstDate","shuffleArray","array","length","j","Math","floor","random","getImages","cConfig","default","links","tmdb","gConfig","rawg","currDate","Date","fromDate","toDate","movieImagesResults","discovermovie","link","api_key","keys","query","movieImagesResults2","tvImagesResults","discovertv","tvImagesResults2","gameImagesResults","list","gameImagesResults2","movieImagesData","data","results","concat","tvImagesData","gameImagesData","movieImagesProps","filter","movie","backdrop_path","map","src","image","thumbnail","thumbnailWidth","thumbnailHeight","tvImagesProps","tv","gameImagesProps","game","background_image","movieIndexes","Array","from","tvIndexes","gameIndexes","imageProps","display","minHeight","width","overflow","position","cursor","zIndex","height"],"mappings":"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","sourcesContent":["import Gallery from \"react-grid-gallery\";\r\nimport React, {useCallback, useEffect, useState} from \"react\";\r\nimport * as config from \"../../../config.json\";\r\nimport {search} from \"../../search/util\";\r\nimport './HomeGallery.css';\r\n\r\nfunction waitForElm(selector) {\r\n    return new Promise(resolve => {\r\n        if (document.querySelector(selector)) {\r\n            return resolve(document.querySelector(selector));\r\n        }\r\n\r\n        const observer = new MutationObserver(mutations => {\r\n            if (document.querySelector(selector)) {\r\n                resolve(document.querySelector(selector));\r\n                observer.disconnect();\r\n            }\r\n        });\r\n\r\n        observer.observe(document.body, {\r\n            childList: true,\r\n            subtree: true\r\n        });\r\n    });\r\n}\r\n\r\nexport function HomeGallery(props) {\r\n    const [images, setImages] = useState([]);\r\n    console.log((window.innerWidth / 100));\r\n    // const numCols = 6; // ((3/4) * Math.floor(window.innerWidth / 100)) - (5/4); // 10\r\n    // const yOffset = -15; //-100 // -15\r\n    // let translateYVal = yOffset;\r\n    // const translateYChange = 65; //-Math.floor(window.innerHeight / 100) + 16; //64 // 9\r\n    // let translateY = translateYVal;\r\n    let ogX = 0, ogY = -100, posX = ogX, posY = ogY, ogTranslateY = 60, numOfRows = 1;\r\n    let translateX = 260, translateY = ogTranslateY, tileHeight = 171;\r\n    useEffect(() => {\r\n        waitForElm(\".ReactGridGallery_tile\").then((elm) => {\r\n            document.querySelectorAll(\".ReactGridGallery_tile\").forEach((tile, i) => {\r\n            tile.style.transform = 'scaleX(1) scaleY(1) scaleZ(1) rotateX(-3deg) rotateY(-34deg) rotateZ(16deg) translateX(0px) translateY(0px) translateZ(0px) skewX(-14deg) skewY(-7deg)';\r\n            tile.style.left = posX + 'px';\r\n            tile.style.top = posY + 'px';\r\n            posX += translateX;\r\n            posY += translateY;\r\n            if (posX > window.innerWidth) {\r\n                posX = ogX;\r\n                posY = tileHeight * numOfRows + ogY;\r\n                translateY = ogTranslateY;\r\n                numOfRows++;\r\n            }\r\n            });\r\n        });\r\n    });\r\n\r\n    const formatDate = date => date.getFullYear() + '-' + (date.getMonth() < 9 ? '0' : '') + (date.getMonth() + 1) + '-' + (date.getDate() < 9 ? '0' : '') + date.getDate();\r\n    const getFirstDate = date => (date.getMonth() <= 2 ? date.getFullYear() - 1 : date.getFullYear()) + '-' + (date.getMonth() < 9 ? '0' : '') + ((date.getMonth() <= 2 ? 11 - date.getMonth() : (date.getMonth() - 3)) + 1) + '-01';\r\n    const shuffleArray = (array) => {\r\n        for (let i = array.length - 1; i > 0; i--) {\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            [array[i], array[j]] = [array[j], array[i]];\r\n        }\r\n        return array;\r\n    }\r\n\r\n    const getImages = useCallback(async() => {\r\n        const cConfig = config.default.config.links.tmdb;\r\n        const gConfig = config.default.config.links.rawg;\r\n\r\n        const currDate = new Date();\r\n\r\n        const fromDate = getFirstDate(currDate);\r\n        const toDate = formatDate(currDate);\r\n\r\n        const movieImagesResults = await search(`${cConfig.discovermovie.link + cConfig.discovermovie.api_key + config.default.config.keys.tmdb + cConfig.discovermovie.query + '&page=' + Math.floor((Math.random() * 5) + 1)}`);\r\n        const movieImagesResults2 = await search(`${cConfig.discovermovie.link + cConfig.discovermovie.api_key + config.default.config.keys.tmdb + cConfig.discovermovie.query + '&page=' + Math.floor(5 + (Math.random() * 5) + 1)}`);\r\n\r\n        const tvImagesResults = await search(`${cConfig.discovertv.link + cConfig.discovertv.api_key + config.default.config.keys.tmdb + cConfig.discovertv.query + '&page=' + Math.floor((Math.random() * 5) + 1)}`);\r\n        const tvImagesResults2 = await search(`${cConfig.discovertv.link + cConfig.discovertv.api_key + config.default.config.keys.tmdb + cConfig.discovertv.query + '&page=' + Math.floor(5 + (Math.random() * 5) + 1)}`);\r\n\r\n        const gameImagesResults = await search(`${gConfig.list.link + 'key=' + config.default.config.keys.rawg + '&dates=' + fromDate + ',' + toDate + '&page=' + Math.floor((Math.random() * 5) + 1)}`);\r\n        const gameImagesResults2 = await search(`${gConfig.list.link + 'key=' + config.default.config.keys.rawg + '&dates=' + fromDate + ',' + toDate + '&page=' + Math.floor(5 + (Math.random() * 5) + 1)}`);\r\n\r\n        if (!movieImagesResults  || ! movieImagesResults2 || !tvImagesResults || !tvImagesResults2 || !gameImagesResults || !gameImagesResults2) return;\r\n        const movieImagesData = movieImagesResults[0].data.results.concat(movieImagesResults2[0].data.results);\r\n\r\n        const tvImagesData = tvImagesResults[0].data.results.concat(tvImagesResults2[0].data.results);\r\n\r\n        const gameImagesData = gameImagesResults[0].data.results.concat(gameImagesResults2[0].data.results);\r\n\r\n        const movieImagesProps = movieImagesData.filter(movie =>movie.backdrop_path).map((movie, i) => ({\r\n            src: `${cConfig.image.link + '/w300/' + movie.backdrop_path}`,\r\n            thumbnail: `${cConfig.image.link + '/w300/' + movie.backdrop_path}`,\r\n            thumbnailWidth: 300,\r\n            thumbnailHeight: 169\r\n        }));\r\n\r\n        const tvImagesProps = tvImagesData.filter(tv => tv.backdrop_path).map((tv, i) => ({\r\n            src: `${cConfig.image.link + '/w300/' + tv.backdrop_path}`,\r\n            thumbnail: `${cConfig.image.link + '/w300/' + tv.backdrop_path}`,\r\n            thumbnailWidth: 300,\r\n            thumbnailHeight: 169\r\n        }));\r\n\r\n        const gameImagesProps = gameImagesData.filter(game => game.background_image).map((game, i) => ({\r\n            src: game.background_image,\r\n            thumbnail: game.background_image,\r\n            thumbnailWidth: 300,\r\n            thumbnailHeight: 169\r\n        }));\r\n\r\n        let movieIndexes = shuffleArray(Array.from(Array(movieImagesProps.length).keys()));\r\n        let tvIndexes = shuffleArray(Array.from(Array(tvImagesProps.length).keys()));\r\n        let gameIndexes = shuffleArray(Array.from(Array(gameImagesProps.length).keys()));\r\n\r\n        const imageProps = shuffleArray(\r\n            movieIndexes\r\n                .map(i => movieImagesProps[i])\r\n            .concat(tvIndexes\r\n                .map(i => tvImagesProps[i])\r\n            )\r\n            .concat(gameIndexes\r\n                .map(i => gameImagesProps[i])\r\n            )\r\n        );\r\n\r\n        console.log(imageProps);\r\n\r\n        setImages(imageProps);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        getImages()\r\n    }, [getImages]);\r\n\r\n    return (\r\n        <>\r\n            <p>{window.innerWidth + \" \" + window.innerWidth}</p>\r\n            <div className='gallery-gradient' />\r\n            <div className='gallery-container' style={{\r\n                display: \"block\",\r\n                minHeight: \"1px\",\r\n                width: \"200%\",\r\n                overflow: \"hidden\",\r\n                position: 'absolute',\r\n                cursor: 'none',\r\n                zIndex: '-2',\r\n                top: '-30%',\r\n                left: '-30%'\r\n            }}>\r\n                {images.map(image => {\r\n                    return (\r\n                    <img\r\n                        className='ReactGridGallery_tile'\r\n                        src={image.thumbnail}\r\n                        style={{\r\n                            width: image.thumbnailWidth,\r\n                            height: image.thumbnailHeight,\r\n                            position: 'fixed',\r\n                            zIndex: 2000\r\n                        }}\r\n                    />\r\n                    )\r\n                })}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}